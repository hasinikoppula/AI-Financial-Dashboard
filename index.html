<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Financial Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 10px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .card h3 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .expense-input {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        input, select, button {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s ease;
        }

        button:hover {
            transform: scale(1.05);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #38b2ac, #4299e1);
        }

        .expense-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .expense-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .category-tag {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .amount {
            font-weight: 600;
            color: #e53e3e;
        }

        .positive {
            color: #38a169;
        }

        .alert {
            background: linear-gradient(135deg, #f6ad55, #ed8936);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-weight: 500;
        }

        .alert.success {
            background: linear-gradient(135deg, #68d391, #38a169);
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 15px;
        }

        .budget-progress {
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .budget-fill {
            height: 20px;
            background: linear-gradient(90deg, #38a169, #68d391);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }

        .budget-over {
            background: linear-gradient(90deg, #e53e3e, #fc8181);
        }

        .gold-price {
            font-size: 2rem;
            font-weight: 700;
            color: #d69e2e;
            text-align: center;
            margin: 10px 0;
        }

        .price-change {
            text-align: center;
            font-weight: 600;
        }

        .price-up {
            color: #38a169;
        }

        .price-down {
            color: #e53e3e;
        }

        .prediction-card {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            text-align: center;
        }

        .prediction-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 15px 0;
        }

        .insights-list {
            list-style: none;
        }

        .insights-list li {
            background: #f7fafc;
            margin: 8px 0;
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🤖 AI Financial Dashboard</h1>
            <p>Smart expense tracking with predictive analytics</p>
        </div>

        <div class="dashboard">
            <!-- Expense Input -->
            <div class="card">
                <h3>💳 Add Expense</h3>
                <div class="expense-input">
                    <input type="text" id="expenseDesc" placeholder="Description (e.g., Grocery shopping)">
                    <div class="input-group">
                        <input type="number" id="expenseAmount" placeholder="Amount" step="0.01">
                        <select id="manualCategory">
                            <option value="">Auto-categorize</option>
                            <option value="Food">Food</option>
                            <option value="Transport">Transport</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Shopping">Shopping</option>
                            <option value="Bills">Bills</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <button onclick="addExpense()">Add Expense</button>
                </div>
                
                <div class="expense-list" id="expenseList">
                    <!-- Expenses will be populated here -->
                </div>
            </div>

            <!-- Budget Tracking -->
            <div class="card">
                <h3>🎯 Budget Tracker</h3>
                <div class="input-group">
                    <input type="number" id="budgetAmount" placeholder="Monthly Budget" step="0.01">
                    <button onclick="setBudget()">Set Budget</button>
                </div>
                
                <div id="budgetStatus">
                    <div class="budget-progress">
                        <div class="budget-fill" id="budgetFill" style="width: 0%">0%</div>
                    </div>
                    <p>Spent: $<span id="totalSpent">0</span> / $<span id="budgetLimit">0</span></p>
                </div>

                <div id="alerts"></div>
            </div>

            <!-- Gold Tracking -->
            <div class="card">
                <h3>🥇 Gold Price Tracker</h3>
                <div class="gold-price" id="goldPrice">$2,045.30</div>
                <div class="price-change price-up" id="goldChange">+$12.50 (+0.61%)</div>
                <button class="btn-secondary" onclick="updateGoldPrice()">Refresh Price</button>
                
                <div style="margin-top: 15px;">
                    <p><strong>24h High:</strong> $<span id="goldHigh">2,058.20</span></p>
                    <p><strong>24h Low:</strong> $<span id="goldLow">2,032.40</span></p>
                </div>
            </div>

            <!-- Spending Prediction -->
            <div class="card prediction-card">
                <h3>📊 AI Spending Prediction</h3>
                <div class="prediction-value" id="prediction">$1,245</div>
                <p>Predicted spending this month</p>
                <div style="margin-top: 15px; font-size: 14px;">
                    <p>Confidence: <span id="confidence">87%</span></p>
                    <p>Trend: <span id="trend">Increasing</span></p>
                </div>
            </div>
        </div>

        <!-- Charts and Analytics -->
        <div class="dashboard">
            <div class="card" style="grid-column: 1 / -1;">
                <h3>📈 Spending Analytics</h3>
                <div class="chart-container">
                    <canvas id="spendingChart"></canvas>
                </div>
            </div>

            <div class="card">
                <h3>🏷 Category Breakdown</h3>
                <div class="chart-container">
                    <canvas id="categoryChart"></canvas>
                </div>
            </div>

            <div class="card">
                <h3>🧠 AI Insights</h3>
                <ul class="insights-list" id="insightsList">
                    <li>Your food spending is 15% higher than last month</li>
                    <li>You typically spend more on weekends</li>
                    <li>Transportation costs are trending downward</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
        let monthlyBudget = parseFloat(localStorage.getItem('monthlyBudget')) || 0;
        let goldData = {
            price: 2045.30,
            change: 12.50,
            changePercent: 0.61,
            high: 2058.20,
            low: 2032.40
        };

        // AI Categorization Engine
        function categorizeExpense(description) {
            const desc = description.toLowerCase();
            
            const categories = {
                'Food': ['restaurant', 'grocery', 'food', 'coffee', 'lunch', 'dinner', 'breakfast', 'cafe', 'pizza', 'burger', 'market', 'supermarket'],
                'Transport': ['gas', 'fuel', 'uber', 'taxi', 'bus', 'train', 'parking', 'toll', 'metro', 'subway'],
                'Entertainment': ['movie', 'cinema', 'concert', 'game', 'spotify', 'netflix', 'gym', 'sport'],
                'Shopping': ['amazon', 'store', 'clothes', 'shoes', 'electronics', 'book', 'gift'],
                'Bills': ['electric', 'water', 'internet', 'phone', 'rent', 'insurance', 'subscription'],
                'Healthcare': ['doctor', 'pharmacy', 'medicine', 'hospital', 'dental', 'medical']
            };

            for (const [category, keywords] of Object.entries(categories)) {
                if (keywords.some(keyword => desc.includes(keyword))) {
                    return category;
                }
            }
            
            return 'Other';
        }

        // Add expense function
        function addExpense() {
            const desc = document.getElementById('expenseDesc').value;
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const manualCategory = document.getElementById('manualCategory').value;

            if (!desc || !amount) {
                alert('Please enter description and amount');
                return;
            }

            const category = manualCategory || categorizeExpense(desc);
            const expense = {
                id: Date.now(),
                description: desc,
                amount: amount,
                category: category,
                date: new Date().toISOString().split('T')[0]
            };

            expenses.push(expense);
            localStorage.setItem('expenses', JSON.stringify(expenses));
            
            // Clear inputs
            document.getElementById('expenseDesc').value = '';
            document.getElementById('expenseAmount').value = '';
            document.getElementById('manualCategory').value = '';

            updateDisplay();
            updatePrediction();
            generateInsights();
        }

        // Set budget function
        function setBudget() {
            const budget = parseFloat(document.getElementById('budgetAmount').value);
            if (!budget) {
                alert('Please enter a valid budget amount');
                return;
            }

            monthlyBudget = budget;
            localStorage.setItem('monthlyBudget', budget.toString());
            updateBudgetDisplay();
        }

        // Update all displays
        function updateDisplay() {
            updateExpenseList();
            updateBudgetDisplay();
            updateCharts();
            checkBudgetAlerts();
        }

        // Update expense list
        function updateExpenseList() {
            const list = document.getElementById('expenseList');
            const recentExpenses = expenses.slice(-5).reverse();
            
            list.innerHTML = recentExpenses.map(expense => `
                <div class="expense-item">
                    <div>
                        <div>${expense.description}</div>
                        <span class="category-tag">${expense.category}</span>
                    </div>
                    <div class="amount">-$${expense.amount.toFixed(2)}</div>
                </div>
            `).join('');
        }

        // Update budget display
        function updateBudgetDisplay() {
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            
            const monthlyExpenses = expenses.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth && expenseDate.getFullYear() === currentYear;
            });

            const totalSpent = monthlyExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            const percentage = monthlyBudget > 0 ? (totalSpent / monthlyBudget) * 100 : 0;

            document.getElementById('totalSpent').textContent = totalSpent.toFixed(2);
            document.getElementById('budgetLimit').textContent = monthlyBudget.toFixed(2);
            
            const budgetFill = document.getElementById('budgetFill');
            budgetFill.style.width = Math.min(percentage, 100) + '%';
            budgetFill.textContent = Math.round(percentage) + '%';
            
            if (percentage > 100) {
                budgetFill.classList.add('budget-over');
            } else {
                budgetFill.classList.remove('budget-over');
            }
        }

        // Check budget alerts
        function checkBudgetAlerts() {
            if (monthlyBudget === 0) return;

            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            
            const monthlyExpenses = expenses.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth && expenseDate.getFullYear() === currentYear;
            });

            const totalSpent = monthlyExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            const percentage = (totalSpent / monthlyBudget) * 100;
            
            const alertsDiv = document.getElementById('alerts');
            alertsDiv.innerHTML = '';

            if (percentage >= 100) {
                alertsDiv.innerHTML = '<div class="alert">⚠ Budget exceeded! You\'ve spent $' + (totalSpent - monthlyBudget).toFixed(2) + ' over budget.</div>';
            } else if (percentage >= 80) {
                alertsDiv.innerHTML = '<div class="alert">🔔 You\'ve used ' + Math.round(percentage) + '% of your budget.</div>';
            } else if (percentage >= 50) {
                alertsDiv.innerHTML = '<div class="alert success">✅ Budget on track - ' + Math.round(percentage) + '% used.</div>';
            }
        }

        // Update gold price (simulated)
        function updateGoldPrice() {
            // Simulate price fluctuation
            const change = (Math.random() - 0.5) * 50;
            goldData.price += change;
            goldData.change = change;
            goldData.changePercent = (change / goldData.price) * 100;
            
            // Update high/low
            goldData.high = Math.max(goldData.high, goldData.price);
            goldData.low = Math.min(goldData.low, goldData.price);

            document.getElementById('goldPrice').textContent = '$' + goldData.price.toFixed(2);
            
            const changeElement = document.getElementById('goldChange');
            const changeText = (change >= 0 ? '+' : '') + '$' + change.toFixed(2) + 
                             ' (' + (change >= 0 ? '+' : '') + goldData.changePercent.toFixed(2) + '%)';
            changeElement.textContent = changeText;
            changeElement.className = change >= 0 ? 'price-change price-up' : 'price-change price-down';

            document.getElementById('goldHigh').textContent = goldData.high.toFixed(2);
            document.getElementById('goldLow').textContent = goldData.low.toFixed(2);
        }

        // Predictive analysis
        function updatePrediction() {
            if (expenses.length < 3) return;

            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const currentDay = new Date().getDate();

            const monthlyExpenses = expenses.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth && expenseDate.getFullYear() === currentYear;
            });

            const totalSpentThisMonth = monthlyExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            const dailyAverage = totalSpentThisMonth / currentDay;
            const remainingDays = daysInMonth - currentDay;
            
            // AI prediction with trend analysis
            const recentTrend = expenses.slice(-10).reduce((sum, expense) => sum + expense.amount, 0) / 10;
            const prediction = totalSpentThisMonth + (dailyAverage * remainingDays * (1 + (recentTrend / dailyAverage * 0.1)));

            document.getElementById('prediction').textContent = '$' + Math.round(prediction);
            document.getElementById('confidence').textContent = Math.round(85 + Math.random() * 10) + '%';
            document.getElementById('trend').textContent = recentTrend > dailyAverage ? 'Increasing' : 'Decreasing';
        }

        // Generate AI insights
        function generateInsights() {
            const insights = [];
            const categories = {};
            
            expenses.forEach(expense => {
                categories[expense.category] = (categories[expense.category] || 0) + expense.amount;
            });

            const sortedCategories = Object.entries(categories).sort((a, b) => b[1] - a[1]);
            
            if (sortedCategories.length > 0) {
                insights.push(Your highest spending category is ${sortedCategories[0][0]} ($${sortedCategories[0][1].toFixed(2)}));
            }

            if (expenses.length > 7) {
                const recentAvg = expenses.slice(-7).reduce((sum, e) => sum + e.amount, 0) / 7;
                const previousAvg = expenses.slice(-14, -7).reduce((sum, e) => sum + e.amount, 0) / 7;
                const change = ((recentAvg - previousAvg) / previousAvg * 100).toFixed(1);
                
                if (Math.abs(change) > 5) {
                    insights.push(Your daily spending has ${change > 0 ? 'increased' : 'decreased'} by ${Math.abs(change)}% this week);
                }
            }

            insights.push('Consider setting up automatic savings transfers');
            insights.push(You have ${expenses.length} transactions recorded this month);

            document.getElementById('insightsList').innerHTML = insights.map(insight => 
                <li>${insight}</li>
            ).join('');
        }

        // Chart setup
        let spendingChart, categoryChart;

        function updateCharts() {
            updateSpendingChart();
            updateCategoryChart();
        }

        function updateSpendingChart() {
            const ctx = document.getElementById('spendingChart').getContext('2d');
            
            // Get last 7 days data
            const last7Days = [];
            const today = new Date();
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                const dateString = date.toISOString().split('T')[0];
                
                const dayExpenses = expenses.filter(expense => expense.date === dateString);
                const total = dayExpenses.reduce((sum, expense) => sum + expense.amount, 0);
                
                last7Days.push({
                    date: date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
                    amount: total
                });
            }

            if (spendingChart) {
                spendingChart.destroy();
            }

            spendingChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: last7Days.map(day => day.date),
                    datasets: [{
                        label: 'Daily Spending',
                        data: last7Days.map(day => day.amount),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateCategoryChart() {
            const ctx = document.getElementById('categoryChart').getContext('2d');
            
            const categories = {};
            expenses.forEach(expense => {
                categories[expense.category] = (categories[expense.category] || 0) + expense.amount;
            });

            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4facfe', '#00f2fe', '#43e97b'];

            if (categoryChart) {
                categoryChart.destroy();
            }

            categoryChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(categories),
                    datasets: [{
                        data: Object.values(categories),
                        backgroundColor: colors.slice(0, Object.keys(categories).length),
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplay();
            updatePrediction();
            generateInsights();
            
            // Auto-update gold price every 30 seconds
            setInterval(updateGoldPrice, 30000);
        });

        // Add some sample data if empty
        if (expenses.length === 0) {
            const sampleExpenses = [
                { id: 1, description: 'Grocery shopping at Walmart', amount: 45.67, category: 'Food', date: '2024-09-10' },
                { id: 2, description: 'Gas station fill-up', amount: 32.50, category: 'Transport', date: '2024-09-11' },
                { id: 3, description: 'Netflix subscription', amount: 15.99, category: 'Entertainment', date: '2024-09-12' },
                { id: 4, description: 'Coffee at Starbucks', amount: 4.95, category: 'Food', date: '2024-09-13' }
            ];
            
            expenses = sampleExpenses;
            localStorage.setItem('expenses', JSON.stringify(expenses));
        }
    </script>
</body>
</html>